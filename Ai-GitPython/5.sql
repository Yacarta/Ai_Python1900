SELECT *
FROM DOCTORS



ALTER TABLE DOCTORS
ADD COLUMN PREMIUM FLOAT NOT NULL CHECK(PREMIUM >=0) DEFAULT 0

UPDATE DOCTORS
SET PREMIUM = ROUND(500*RANDOM())

SELECT *
FROM DOCTORS

UPDATE DOCTORS
SET PREMIUM = 0.1*SALARY

-- Спеціалізації (Specializations)
--  ■ Ідентифікатор (Id). Унікальний ідентифікатор 
-- спеці-алізації.
--  ▷Тип даних — int.
--  ▷Автоприріст.
--  ▷Не містить null-значення.
--  ▷Первинний ключ.
--  ■ Назва (Name). Назва спеціалізації.
--  ▷Тип даних — varchar(100).
--  ▷Не містить null-значення.
--  ▷Не може бути порожньою.
--  ▷Має бути унікальною

CREATE TABLE SPECIALIZATIONS(
  ID SERIAL NOT NULL PRIMARY KEY,
  NAME VARCHAR(100) NOT NULL CHECK(NAME != '') UNIQUE
)


INSERT INTO SPECIALIZATIONS (NAME) VALUES
('Кардіолог'),
('Хірург'),
('Терапевт'),
('Невролог'),
('Дерматолог'),
('Офтальмолог'),
('Педіатр'),
('Онколог'),
('Стоматолог'),
('Психіатр')

SELECT *
FROM SPECIALIZATIONS

--  ¾Лікарі та спеціалізації (DoctorsSpecializations)
--  ■ Ідентифікатор (Id). Унікальний ідентифікатор лікаря
--  та спеціалізації.
--  ▷Тип даних — int.
--  ▷Автоприріст.
--  ▷Не містить null-значення.
--  ▷Первинний ключ.

CREATE TABLE DoctorsSpecializations (
    DOCTORID INT NOT NULL REFERENCES DOCTORS(ID),
    SPECIALIZATIONID INT NOT NULL REFERENCES SPECIALIZATIONS(ID),
    PRIMARY KEY (DOCTORID, SPECIALIZATIONID)
);

INSERT INTO DoctorsSpecializations(
DOCTORID,
SPECIALIZATIONID
)
VALUES
(1,4)
(1,10)

INSERT INTO DOCTORSSPECIALIZATIONS (DOCTORID, SPECIALIZATIONID) VALUES
(1, 1),
(1, 2),
(2, 3),
(3, 4),
(4, 5),
(5, 6),
(6, 7),
(7, 8),
(8, 9),
(9, 10),
(10, 1),
(11, 2),
(12, 3),
(13, 4),
(14, 5),
(15, 6),
(16, 7),
(17, 8),
(18, 9),
(19, 10),
(20, 1),
(21, 2),
(22, 3),
(23, 4),
(24, 5),
(25, 6),
(26, 7),
(27, 8),
(28, 9),
(29, 10),
(30, 1),
(31, 2),
(32, 3),
(33, 4),
(34, 5),
(35, 6),
(36, 7),
(37, 8),
(38, 9),
(39, 10),
(40, 1);


--  ■ Ідентифікатор лікаря (DoctorId). Лікар.
--  ▷Тип даних — int.
--  ▷Не містить null-значення.
--  ▷Зовнішній ключ.
--  ■ Ідентифікатор спеціалізації (SpecializationId). Спеці
-- алізація.
--  ▷Тип даних — int.
--  ▷Не містить null-значення.
--  ▷Зовнішній ключ.

--  ¾Пожертвування (Donations)
--  ■ Ідентифікатор (Id). Унікальний ідентифікатор пожер
-- твування.
--  ▷Тип даних — int.
--  ▷Автоприріст.
--  ▷Не містить null-значення.
--  ▷Первинний ключ.
--  ■ Сума (Amount). Сума пожертвування.
--  ▷Тип даних для зберігання грошових значень.
--  ▷Не містить null-значення.
--  ▷Не може бути меншою або дорівнювати 0.
--  ■ Дата (Date). Дата пожертвування.
--  ▷Тип даних для зберігання дати.
--  ▷Не містить null-значення.
--  ▷Не може бути більшою за поточну дату.
--  ▷Значення за замовчуванням — поточна дата.
--  ■ Ідентифікатор відділення (DepartmentId). Відділення,
--  якому було надано пожертвування.
--  ▷Тип даних — int.
--  ▷Не містить null-значення.
--  ▷Зовнішній ключ.
--  ■ Ідентифікатор спонсора (SponsorId). Спонсор, який
--  зробив пожертвування.
--  ▷Тип даних — int.
--  ▷Не містить null-значення.
--  ▷Зовнішній ключ.

CREATE TABLE Donations(
	ID SERIAL NOT NULL PRIMARY KEY,
	Amount FLOAT NOT NULL CHECK(Amount > 0),
	Date DATE NOT NULL CHECK(Date <= CURRENT_DATE) DEFAULT CURRENT_DATE,
	DepartmentId INT NOT NULL REFERENCES DEPARTMENTS(ID),
	SponsorId INT NOT NULL REFERENCES Sponsors(ID)
	)


INSERT INTO Donations (Amount, Date, DepartmentId, SponsorId) VALUES
(500.00, '2025-03-10', 1, 3),
(2500.00, '2025-01-15', 2, 7),
(150.50, '2025-02-20', 3, 2),
(800.00, '2025-03-05', 4, 1),
(1200.75, '2025-01-25', 5, 5),
(430.00, '2025-02-10', 6, 8),
(900.00, '2025-03-02', 7, 6),
(1100.20, '2025-03-12', 8, 9),
(3000.00, '2025-02-01', 9, 4),
(750.00, '2025-01-30', 10, 10),
(620.00, '2025-03-08', 1, 2),
(200.00, '2025-02-25', 2, 5),
(950.50, '2025-03-01', 3, 6),
(1400.00, '2025-01-18', 4, 9),
(510.00, '2025-03-11', 5, 3),
(2700.00, '2025-02-15', 6, 7),
(330.00, '2025-01-22', 7, 8),
(800.00, '2025-02-28', 8, 4),
(1900.75, '2025-03-06', 9, 1),
(100.00, '2025-01-10', 10, 10);


SELECT COUNT(*)
FROM DEPARTMENTS

--  ¾Спеціалізації (Specializations)
--  ■ Ідентифікатор (Id). Унікальний ідентифікатор 
-- спеці-алізації.
--  ▷Тип даних — int.
--  ▷Автоприріст.
--  ▷Не містить null-значення.
--  ▷Первинний ключ.
--  ■ Назва (Name). Назва спеціалізації.
--  ▷Тип даних — varchar(100).
--  ▷Не містить null-значення.
--  ▷Не може бути порожньою.
--  ▷Має бути унікальною.


--  ¾Спонсори (Sponsors)
--  ■ Ідентифікатор (Id). Унікальний ідентифікатор 
-- спонсора.
--  ▷Тип даних — int.
--  ▷Автоприріст.
--  ▷Не містить null-значення.
--  ▷Первинний ключ.
--  ■ Назва (Name). Назва спонсора.
--  ▷Тип даних — varchar(100).
--  ▷Не містить null-значення.
--  ▷Не може бути порожньою.
--  ▷Має бути унікальною.

CREATE TABLE Sponsors(
	ID SERIAL NOT NULL PRIMARY KEY,
	Name VARCHAR(100) NOT NULL UNIQUE
)

INSERT INTO Sponsors (Name) VALUES
('Coca-Cola'),
('Nike'),
('Pepsi'),
('Adidas'),
('Samsung'),
('Apple'),
('Microsoft'),
('Google'),
('Amazon'),
('Toyota');

--  ¾Відпустки (Vacations)
--  ■ Ідентифікатор (Id). Унікальний ідентифікатор 
-- відпустки.
--  ▷Тип даних — int.
--  ▷Автоприріст.
--  6
--  ▷Не містить null-значення
--   ▷Первинний ключ.
--  ■ Дата завершення (EndDate). Дата завершення відпустки.
--  ▷Тип даних для зберігання дати.
--  ▷Не містить null-значення.
--  ▷Має бути більшою за дату початку відпустки.
--  ■ Дата початку (StartDate). Дата початку відпустки.
--  ▷Тип даних для зберігання дати.
--  ▷Не містить null-значення.
--  ■ Ідентифікатор лікаря (DoctorId). Лікар, який у відпустці.
--  ▷Тип даних — int.
--  ▷Не містить null-значення.
--  ▷Зовнішній ключ.

CREATE TABLE Vacations(
	ID SERIAL PRIMARY KEY NOT NULL,
	EndDate DATE NOT NULL CHECK(EndDate > StartDate) ,
	StartDate DATE NOT NULL,
	DoctorId INT NOT NULL REFERENCES DOCTORS(ID)
	)

INSERT INTO Vacations (StartDate, EndDate, DoctorId) VALUES
('2025-01-01', '2025-01-10', 1),
('2025-02-05', '2025-02-15', 2),
('2025-03-10', '2025-03-20', 3),
('2025-04-01', '2025-04-12', 4),
('2025-01-15', '2025-01-25', 5),
('2025-02-20', '2025-02-28', 6),
('2025-03-01', '2025-03-11', 7),
('2025-04-10', '2025-04-20', 8),
('2025-01-05', '2025-01-14', 9),
('2025-02-01', '2025-02-12', 10),
('2025-03-15', '2025-03-25', 11),
('2025-04-05', '2025-04-15', 12),
('2025-01-10', '2025-01-20', 13),
('2025-02-10', '2025-02-22', 14),
('2025-03-20', '2025-03-30', 15),
('2025-04-01', '2025-04-10', 16),
('2025-01-12', '2025-01-22', 17),
('2025-02-15', '2025-02-25', 18),
('2025-03-02', '2025-03-12', 19),
('2025-04-08', '2025-04-18', 20);

--  ¾Палати (Wards)
--  ■ Ідентифікатор (Id). Унікальний ідентифікатор.
--  ▷Тип даних — int.
--  ▷Автоприріст.
--  ▷Не містить null-значення.
--  ▷Первинний ключ.
--  ■ Назва (Name). Назва палати.
--  ▷Тип даних — varchar(20).
--  ▷Не містить null-значення.
--  ▷Не може бути порожньою.
--  ▷Має бути унікальною.
--  ■ Ідентифікатор відділення (DepartmentId). Відділення, 
-- де знаходиться палата.
--  ▷Тип даних — int.
--  ▷Не містить null-значення.
--  ▷Зовнішній ключ.

SELECT  COUNT(*) 
FROM DEPARTMENTS

ALTER TABLE WARDS
ADD COLUMN DepartmentId INT NOT NULL REFERENCES DEPARTMENTS(ID) DEFAULT 1

UPDATE WARDS
SET DepartmentId = ROUND(9*RANDOM() + 1)

SELECT*
FROM WARDS
 